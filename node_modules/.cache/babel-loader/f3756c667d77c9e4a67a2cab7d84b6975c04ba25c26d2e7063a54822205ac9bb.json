{"ast":null,"code":"// src/components/WeatherChart.tsx\nimport React,{useRef}from\"react\";import{Chart as ChartJS,LineElement,PointElement,LinearScale,CategoryScale,Tooltip,Legend}from\"chart.js\";import{Line}from\"react-chartjs-2\";import zoomPlugin from'chartjs-plugin-zoom';import annotationPlugin from'chartjs-plugin-annotation';import{jsx as _jsx}from\"react/jsx-runtime\";ChartJS.register(LineElement,PointElement,LinearScale,CategoryScale,Tooltip,Legend,zoomPlugin,annotationPlugin);const WeatherChart=_ref=>{let{labels,temperatureData,humidityData,precipitationData,windData,onTimeRangeChange,currentStartIndex,totalHours,selectedRange,onRangeChange}=_ref;const chartRef=useRef(null);const formatTime=timeStr=>{const hour=parseInt(timeStr.split(':')[0]);const period=hour>=12?'PM':'AM';const hour12=hour%12||12;return\"\".concat(hour12).concat(period);};const formattedLabels=labels.map(formatTime);const data={labels:formattedLabels,datasets:[{label:\"Temperature (°F)\",data:temperatureData,borderColor:\"#f97316\",fill:false,yAxisID:'y'},{label:\"Humidity (%)\",data:humidityData,borderColor:\"#22c55e\",fill:false,yAxisID:'y'},{label:\"Chance of Rain (%)\",data:precipitationData,borderColor:\"#3b82f6\",fill:false,yAxisID:'y'},{label:\"Wind Speed (mph)\",data:windData,borderColor:\"#ff6347\",fill:false,yAxisID:'y'}]};// Calculate overall min and max for all datasets\nconst overallMin=Math.min(...temperatureData,...humidityData,...precipitationData,...windData);const overallMax=Math.max(...temperatureData,...humidityData,...precipitationData,...windData);// Add padding to the range (10% padding)\nconst padding=(overallMax-overallMin)*0.1;const options={responsive:true,maintainAspectRatio:false,aspectRatio:1.5,plugins:{legend:{display:true,position:'top',labels:{color:'black'}},tooltip:{mode:'index',intersect:false},annotation:{annotations:selectedRange?{highlight:{type:'box',xMin:selectedRange.start,xMax:selectedRange.end,backgroundColor:'rgba(255, 255, 255, 0.1)',borderColor:'rgba(255, 255, 255, 0.3)',borderWidth:1,drawTime:'beforeDatasetsDraw'}}:{}},zoom:{pan:{enabled:true,mode:'x',modifierKey:'shift',threshold:10,overScaleMode:'x'},zoom:{drag:{enabled:true,backgroundColor:'rgba(255, 255, 255, 0.1)',borderColor:'rgba(255, 255, 255, 0.3)',borderWidth:1},mode:'x',scaleMode:'x',onZoom:_ref2=>{let{chart}=_ref2;const xAxis=chart.scales.x;if(xAxis){// Ensure we don't go past midnight\nconst startIndex=Math.max(0,Math.floor(xAxis.min));const endIndex=Math.min(24,Math.ceil(xAxis.max));if(startIndex>=0&&endIndex<=24&&startIndex<endIndex){onRangeChange({start:formattedLabels[startIndex],end:formattedLabels[endIndex]});}}}}}},scales:{y:{type:'linear',display:true,position:'left',min:Math.floor(overallMin-padding),max:Math.ceil(overallMax+padding),grid:{color:'rgba(0, 0, 0, 0.1)'},ticks:{color:'black',stepSize:Math.ceil((overallMax-overallMin)/10)}},x:{grid:{display:true,color:'rgba(0, 0, 0, 0.1)'},ticks:{color:'black',maxRotation:0,autoSkip:false,maxTicksLimit:8}}},interaction:{mode:'nearest',axis:'x',intersect:false}};return/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-col w-full\",children:/*#__PURE__*/_jsx(\"div\",{style:{height:'400px',width:'100%'},children:/*#__PURE__*/_jsx(Line,{ref:chartRef,data:data,options:options})})});};export default WeatherChart;","map":{"version":3,"names":["React","useRef","Chart","ChartJS","LineElement","PointElement","LinearScale","CategoryScale","Tooltip","Legend","Line","zoomPlugin","annotationPlugin","jsx","_jsx","register","WeatherChart","_ref","labels","temperatureData","humidityData","precipitationData","windData","onTimeRangeChange","currentStartIndex","totalHours","selectedRange","onRangeChange","chartRef","formatTime","timeStr","hour","parseInt","split","period","hour12","concat","formattedLabels","map","data","datasets","label","borderColor","fill","yAxisID","overallMin","Math","min","overallMax","max","padding","options","responsive","maintainAspectRatio","aspectRatio","plugins","legend","display","position","color","tooltip","mode","intersect","annotation","annotations","highlight","type","xMin","start","xMax","end","backgroundColor","borderWidth","drawTime","zoom","pan","enabled","modifierKey","threshold","overScaleMode","drag","scaleMode","onZoom","_ref2","chart","xAxis","scales","x","startIndex","floor","endIndex","ceil","y","grid","ticks","stepSize","maxRotation","autoSkip","maxTicksLimit","interaction","axis","className","children","style","height","width","ref"],"sources":["/Users/leonliu/Desktop/Projects/WeatherApp/src/components/weather/WeatherChart.tsx"],"sourcesContent":["// src/components/WeatherChart.tsx\nimport React, { useRef } from \"react\";\nimport {\n  Chart as ChartJS,\n  LineElement,\n  PointElement,\n  LinearScale,\n  CategoryScale,\n  Tooltip,\n  Legend,\n  ChartOptions,\n} from \"chart.js\";\nimport { Line } from \"react-chartjs-2\";\nimport zoomPlugin from 'chartjs-plugin-zoom';\nimport annotationPlugin from 'chartjs-plugin-annotation';\nimport type { AnnotationOptions } from 'chartjs-plugin-annotation';\n\nChartJS.register(\n  LineElement,\n  PointElement,\n  LinearScale,\n  CategoryScale,\n  Tooltip,\n  Legend,\n  zoomPlugin,\n  annotationPlugin\n);\n\ninterface WeatherChartProps {\n  labels: string[];\n  temperatureData: number[];\n  humidityData: number[];\n  precipitationData: number[];\n  windData: number[];\n  onTimeRangeChange: (startIndex: number) => void;\n  currentStartIndex: number;\n  totalHours: number;\n  selectedRange: { start: string; end: string } | null;\n  onRangeChange: (range: { start: string; end: string } | null) => void;\n}\n\nconst WeatherChart: React.FC<WeatherChartProps> = ({\n  labels,\n  temperatureData,\n  humidityData,\n  precipitationData,\n  windData,\n  onTimeRangeChange,\n  currentStartIndex,\n  totalHours,\n  selectedRange,\n  onRangeChange,\n}) => {\n  const chartRef = useRef<ChartJS<\"line\">>(null);\n\n  const formatTime = (timeStr: string) => {\n    const hour = parseInt(timeStr.split(':')[0]);\n    const period = hour >= 12 ? 'PM' : 'AM';\n    const hour12 = hour % 12 || 12;\n    return `${hour12}${period}`;\n  };\n\n  const formattedLabels = labels.map(formatTime);\n\n  const data = {\n    labels: formattedLabels,\n    datasets: [\n      {\n        label: \"Temperature (°F)\",\n        data: temperatureData,\n        borderColor: \"#f97316\",\n        fill: false,\n        yAxisID: 'y',\n      },\n      {\n        label: \"Humidity (%)\",\n        data: humidityData,\n        borderColor: \"#22c55e\",\n        fill: false,\n        yAxisID: 'y',\n      },\n      {\n        label: \"Chance of Rain (%)\",\n        data: precipitationData,\n        borderColor: \"#3b82f6\",\n        fill: false,\n        yAxisID: 'y',\n      },\n      {\n        label: \"Wind Speed (mph)\",\n        data: windData,\n        borderColor: \"#ff6347\",\n        fill: false,\n        yAxisID: 'y',\n      },\n    ],\n  };\n\n  // Calculate overall min and max for all datasets\n  const overallMin = Math.min(...temperatureData, ...humidityData, ...precipitationData, ...windData);\n  const overallMax = Math.max(...temperatureData, ...humidityData, ...precipitationData, ...windData);\n  \n  // Add padding to the range (10% padding)\n  const padding = (overallMax - overallMin) * 0.1;\n\n  const options: ChartOptions<'line'> = {\n    responsive: true,\n    maintainAspectRatio: false,\n    aspectRatio: 1.5,\n    plugins: {\n      legend: {\n        display: true,\n        position: 'top' as const,\n        labels: {\n          color: 'black'\n        }\n      },\n      tooltip: {\n        mode: 'index' as const,\n        intersect: false,\n      },\n      annotation: {\n        annotations: selectedRange ? {\n          highlight: {\n            type: 'box' as const,\n            xMin: selectedRange.start,\n            xMax: selectedRange.end,\n            backgroundColor: 'rgba(255, 255, 255, 0.1)',\n            borderColor: 'rgba(255, 255, 255, 0.3)',\n            borderWidth: 1,\n            drawTime: 'beforeDatasetsDraw' as const\n          } as AnnotationOptions<'box'>\n        } : {}\n      },\n      zoom: {\n        pan: {\n          enabled: true,\n          mode: 'x' as const,\n          modifierKey: 'shift' as const,\n          threshold: 10,\n          overScaleMode: 'x' as const,\n        },\n        zoom: {\n          drag: {\n            enabled: true,\n            backgroundColor: 'rgba(255, 255, 255, 0.1)',\n            borderColor: 'rgba(255, 255, 255, 0.3)',\n            borderWidth: 1,\n          },\n          mode: 'x' as const,\n          scaleMode: 'x' as const,\n          onZoom: ({ chart }: { chart: ChartJS }) => {\n            const xAxis = chart.scales.x;\n            if (xAxis) {\n              // Ensure we don't go past midnight\n              const startIndex = Math.max(0, Math.floor(xAxis.min));\n              const endIndex = Math.min(24, Math.ceil(xAxis.max));\n              if (startIndex >= 0 && endIndex <= 24 && startIndex < endIndex) {\n                onRangeChange({\n                  start: formattedLabels[startIndex],\n                  end: formattedLabels[endIndex]\n                });\n              }\n            }\n          }\n        }\n      }\n    },\n    scales: {\n      y: {\n        type: 'linear' as const,\n        display: true,\n        position: 'left' as const,\n        min: Math.floor(overallMin - padding),\n        max: Math.ceil(overallMax + padding),\n        grid: {\n          color: 'rgba(0, 0, 0, 0.1)'\n        },\n        ticks: {\n          color: 'black',\n          stepSize: Math.ceil((overallMax - overallMin) / 10)\n        }\n      },\n      x: {\n        grid: {\n          display: true,\n          color: 'rgba(0, 0, 0, 0.1)'\n        },\n        ticks: {\n          color: 'black',\n          maxRotation: 0,\n          autoSkip: false,\n          maxTicksLimit: 8\n        }\n      }\n    },\n    interaction: {\n      mode: 'nearest' as const,\n      axis: 'x' as const,\n      intersect: false\n    }\n  };\n\n  return (\n    <div className=\"flex flex-col w-full\">\n      <div style={{ height: '400px', width: '100%' }}>\n        <Line \n          ref={chartRef}\n          data={data} \n          options={options}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default WeatherChart;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}